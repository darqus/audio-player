@use 'variables' as *;
@use 'breakpoints' as *;

.svelte-audio-player {
  display: grid;
  gap: $gap;
  border: 1px solid $player-border-color;
  border-radius: $gap;
  padding: $gap;
  box-shadow: 0 7px 16px 0 $player-box-shadow-color;
  background-color: $white;

  .track-name {
    display: grid;
    grid-template-columns: auto 1fr;
    font-size: 1rem;
    gap: $gap;
    align-items: end;
    font-size: 0.8rem;
    max-width: 530px;
    align-items: center;

    @include respond-to('small') {
      max-width: 740px;
    }

    strong {
      color: $text-color;
      font-weight: bold;
    }

    .title {
      color: $name-color;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }

  .track-info {
    display: grid;
    grid-template-rows: auto auto;
    gap: $gap;

    @include respond-to('small') {
      grid-template-columns: auto 1fr;
    }
  }

  .track-ranges {
    display: grid;
    grid-template-columns: auto auto;
    gap: $gap;
  }

  .buttons-control {
    display: grid;
    grid-template-columns: repeat(5, $control-size);
    gap: $gap;
    align-items: center;

    button {
      display: grid;
      background-color: transparent;
      border: none;
      cursor: pointer;
      padding: 0;
      transition: opacity $duration;

      svg path {
        fill: $control-color;
      }

      &:focus {
        opacity: $opacity-focus;
      }

      &:hover {
        opacity: $opacity-hover;
      }

      &.repeat,
      &.shuffle {
        opacity: 0.2;
      }
    }
  }

  .progress-control {
    display: grid;
    grid-template-columns:
      $current-time-width
      minmax(80px, 120px)
      $duration-time-width;
    align-items: center;
    gap: $gap;

    @include respond-to('small') {
      grid-template-columns:
        $current-time-width
        minmax(250px, 300px)
        $duration-time-width;
    }

    .current-time,
    .duration-time {
      display: grid;
      font-size: 0.9rem;
      color: $text-color;
    }

    input[type='range'] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      margin: 0;
      background: transparent;

      &::-webkit-slider-runnable-track {
        width: 100%;
        height: $track-height;
        cursor: pointer;
        animate: 0.2s;
        background: $track-background-color;
        border-radius: $track-border-radius;
      }

      &::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: $thumb-size;
        height: $thumb-size;
        background-color: $thumb-background-color;
        border-radius: 50%;
        cursor: pointer;
        margin-top: -4px;
        border: 2px solid $white;
        box-shadow: 0px 1px 4px 0px $range-control-box-shadow-color;
      }

      &::-moz-range-track {
        width: 100%;
        height: $track-height;
        cursor: pointer;
        background-color: $track-background-color;
        border-radius: $track-border-radius;
        border: 2px solid $white;
        box-shadow: 0px 1px 4px 0px $range-control-box-shadow-color;
      }

      &::-moz-range-thumb {
        width: $thumb-size;
        height: $thumb-size;
        background-color: $thumb-background-color;
        border-radius: 50%;
        cursor: pointer;
        border: 2px solid $white;
        box-shadow: 0px 1px 4px 0px $range-control-box-shadow-color;
      }

      &::-ms-track {
        width: 100%;
        height: $track-height;
        cursor: pointer;
        background-color: transparent;
        border-color: transparent;
        color: transparent;
      }

      &::-ms-fill-lower {
        background-color: $track-background-color;
        border-radius: $track-border-radius;
      }

      &::-ms-fill-upper {
        background-color: $track-background-color;
        border-radius: $track-border-radius;
      }

      &::-ms-thumb {
        width: $thumb-size;
        height: $thumb-size;
        background-color: $thumb-background-color;
        border-radius: 50%;
        cursor: pointer;
      }

      &:focus {
        outline: none;

        &::-webkit-slider-runnable-track {
          background-color: $track-background-color-focus;
        }

        &::-moz-range-track {
          background-color: $track-background-color-focus;
        }

        &::-ms-fill-lower {
          background-color: $track-background-color-focus;
        }

        &::-ms-fill-upper {
          background-color: $track-background-color-focus;
        }
      }
    }
  }

  .volume-control {
    display: grid;
    grid-template-columns:
      $control-size-small
      minmax(40px, 60px);
    gap: 2px;
    align-items: center;

    @include respond-to('small') {
      grid-template-columns:
        $control-size-small
        minmax(50px, 100px);
    }

    button {
      display: grid;
      background-color: transparent;
      border: none;
      cursor: pointer;
      padding: 0;
      transition: opacity $duration;

      svg path {
        fill: $control-color;
      }

      &:focus {
        opacity: $opacity-focus;
      }

      &:hover {
        opacity: $opacity-hover;
      }
    }

    input[type='range'] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      margin: 0;
      background: transparent;

      &::-webkit-slider-runnable-track {
        width: 100%;
        height: $track-height;
        cursor: pointer;
        animate: 0.2s;
        background: $track-background-color;
        border-radius: $track-border-radius;
      }

      &::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: $thumb-size;
        height: $thumb-size;
        background-color: $thumb-background-color;
        border-radius: 50%;
        cursor: pointer;
        margin-top: -4px;
        border: 2px solid $white;
        box-shadow: 0px 1px 4px 0px $range-control-box-shadow-color;
      }

      &::-moz-range-track {
        width: 100%;
        height: $track-height;
        cursor: pointer;
        background-color: $track-background-color;
        border-radius: $track-border-radius;
        border: 2px solid $white;
        box-shadow: 0px 1px 4px 0px $range-control-box-shadow-color;
      }

      &::-moz-range-thumb {
        width: $thumb-size;
        height: $thumb-size;
        background-color: $thumb-background-color;
        border-radius: 50%;
        cursor: pointer;
        border: 2px solid $white;
        box-shadow: 0px 1px 4px 0px $range-control-box-shadow-color;
      }

      &::-ms-track {
        width: 100%;
        height: $track-height;
        cursor: pointer;
        background-color: transparent;
        border-color: transparent;
        color: transparent;
      }

      &::-ms-fill-lower {
        background-color: $track-background-color;
        border-radius: $track-border-radius;
      }

      &::-ms-fill-upper {
        background-color: $track-background-color;
        border-radius: $track-border-radius;
      }

      &::-ms-thumb {
        width: $thumb-size;
        height: $thumb-size;
        background-color: $thumb-background-color;
        border-radius: 50%;
        cursor: pointer;
      }

      &:focus {
        outline: none;

        &::-webkit-slider-runnable-track {
          background-color: $track-background-color-focus;
        }

        &::-moz-range-track {
          background-color: $track-background-color-focus;
        }

        &::-ms-fill-lower {
          background-color: $track-background-color-focus;
        }

        &::-ms-fill-upper {
          background-color: $track-background-color-focus;
        }
      }
    }
  }
}
